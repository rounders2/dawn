{%- if product.metafields.customproduct.included -%}
  <div class="whats-included">
    <h4>What's Included:</h4>
    <p>{{ product.metafields.customproduct.included }}</p>
  </div>
{%- endif -%}

<div class="whats-included">
  <div id="product-whats-included">

  </div>
</div>


<script>
 var Good2GoCo = { whatsIncluded: {}};
 {% for variant in product.variants %}
   {% if variant.metafields.customvariant.included %}
     Good2GoCo.whatsIncluded['{{variant.id}}'] = {{ variant.metafields.customvariant.included | json }}
   {% endif %}
 {% endfor %}
</script>

<script>
 (function() {

   function getVariant() {
     var queryString = window.location.search;
     var urlParams = new URLSearchParams(queryString);
     var variantID = urlParams.get('variant');
     if (variantID) {
       console.log("current variant is ", variantID);
       return variantID;
     } else {
       console.log("current variant is ", meta.product.variants[0].id);
       return meta.product.variants[0].id;
     }
   }

   whatsIncluded.update = function() {
     var el = document.getElementById('product-whats-included');
     var whatsIncludedMesg = Good2GoCo.whatsIncluded[getVariant()];

     if (whatsIncludedMesg) {
       el.innerHTML = whatsIncludedMesg;
       el.classList.remove("hidden");
     } else {
       el.classList.add("hidden");
       el.innerHTML = ""
     }
   }

   whatsIncluded.update();
  })();

</script>
